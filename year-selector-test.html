<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>年度選択テスト</title>
    <style>
        .year-btn {
            padding: 8px 15px;
            margin: 5px;
            background-color: #eee;
            border: 1px solid #ddd;
            cursor: pointer;
        }
        .year-btn.active {
            background-color: #4285f4;
            color: white;
        }
    </style>
</head>
<body>
    <h1>年度選択テスト</h1>
    
    <div id="year-selector"></div>
    
    <div id="content" style="margin-top: 20px; padding: 10px; border: 1px solid #ddd;"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script>
        // サンプルデータ
        const yearData = [
            {"year": "all", "nodes": 100},
            {"year": 2021, "nodes": 50},
            {"year": 2022, "nodes": 60},
            {"year": 2023, "nodes": 70},
            {"year": 2024, "nodes": 80},
            {"year": 2025, "nodes": 90}
        ];
        
        // 年度選択ボタンを生成
        function setupYearButtons() {
            const selector = document.getElementById('year-selector');
            selector.innerHTML = '';
            
            yearData.forEach(data => {
                const btn = document.createElement('button');
                btn.className = 'year-btn';
                btn.textContent = data.year === 'all' ? '全期間' : `${data.year}年`;
                
                btn.onclick = function() {
                    // すべてのボタンからactiveクラスを削除
                    document.querySelectorAll('.year-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // クリックされたボタンにactiveクラスを追加
                    this.classList.add('active');
                    
                    // 内容を更新
                    document.getEleme